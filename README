Create your own ups products directory:

1) Create an empty directory. No part of the name is siginficant but it seems sensible
   to adopt the convention that the last part of the name is artexternals.

2) cd to the directory you just made

3) cp -r  /cvmfs/mu2e.opensciencegrid.org/artexternals/.upsfiles .
   You can copy this from any existing ups repository

4) On every login, after you do "setup mu2e"  you need to define the following environment variables
   export PRODUCTS_INSTALL=/absolute/path/to/your/products/directory
   export PRODUCTS=${PRODUCTS}:${PRODUCTS_INSTALL}

We can work on structuring step 4 differently - maybe if PRODUCTS_INSTALL is defined then have "setup mu2e" do
the addition to PRODUCTS?

-----------------------------------------------------------

Setting up the source directory:

1) setup mu2e
2) Step 4 from creating your own products directory
3) cd to a clean directory
4) git clone https://github.com/KFTrack/BTrk.git
    - This will make a subdirectory BTrk
5) This next step is temporary. It will go away after we rewrite the include directives
   source scripts/makeInclude.sh

Making a prof build
1) cd to a clean directory that must be outside of the source directory tree.
   ( This examples assumes that you use same directory that holds BTrk ).
2) mkdir build_prof
3) cd build_prof
4) source ../BTrk/scripts/newBuild.sh prof
   - this will but two files in the directory: SConstruct, setup.sh
   - the prof option is now hardcoded for all future builds.
5) source setup.sh
6) scons -j 8
    - A recent build took 1 min 30 sec of real time and 5 minutes of CPU time.
    - this no longer writes anything in the source tree
    - .os files are written to a new subdirectory, BTrk/
    - libraries are written to a new subdirectory, lib/
7) source ../BTrk/scripts/install.sh
    - this will write the headers and libraries to the products directory made above

As you develop code, edit in the source directory and build in the build directory.
the build scripts will never write into the source directory.

On subsequent logins if you want to rebulid:

1) setup mu2e
2) Step 4 from creating your own products directory
3) cd build_prof
4) source setup.sh

Making a debug build

1) If you have just done the prof build it's easiest to log out and log in again.
2) setup mu2e
3) Step 4 from creating your own products directory
4) cd to the a clean directory - same guidance as above
5) mkdir build_debug
6) cd build_debug
7) source ../BTrk/scripts/newBuild.sh prof
8) Repeat steps 5, 6, 7 from building the prof build.

Some ideas:
1) You may wish to put your source directory on a backed up disk, such as /grid/fermiapp/mu2e or your home disk,
   put your build directories on a scratch disk and put the products are on /mu2e/app, which is not backed up but which
   is mounted on the GPGrid worker nodes.
2) To run offsite We will need user products areas on cvmfs.


Building Mu2e Offline:

1) setup mu2e
2) Step 4 from creating your own products directory
    - You only need to update the definition of PRODUCTS.
    - The definition of PRODUCT_INSTALL is not needed
3) git clone ssh://p-mu2eofflinesoftwaremu2eoffline@cdcvs.fnal.gov/cvs/projects/mu2eofflinesoftwaremu2eoffline/Offline.git
4) git checkout use-btrk
5) scons -j 8

Running art:

1) Add the following line to the services block of any fcl file that you use:
     BtrkHelper : @local::BtrkHelperDefault

What did I change:

In BTrk
1) created subdirectory BTrk and moved all source directories down one level
2) Added SConstruct, setup.sh, and directories: etc/, python/, scripts/, ups/
3) The big change is that I refactored SConstruct. It now is configured to do
   an out-of-source build. THe helper functions are in python//helpers.py
4) Edited all SConcript files
    - the helper classname is changed to build_helper from mu2e_helper
    - I removed the module and data product builds since they are not used.

In Offline:
1) setup.sh
    - Use the BTrk ups product
    - remove section about BaBar svn code
2) SConstruct
    - Use the BTrk ups product
3) Remove the BaBar directory
4) BtrkHelper/src/BtrkHelper_service.cc
     - fixed typo
5) Put copies of material description files into BtrkHelper/data
     ElementsList.data
     IsotopesList.data
     MaterialsList.data
   Edit BtrkHelper/fcl/prolog.fcl to use these files
6) Analyses/test/genReco.fcl
     - add configuration for the BtrkHelper service

When it comes time to make a new version of BTrk, some hand maintence is needed.
We can improve this as we move forward.

1) In setup.sh, edit PACKAGE_VERSION to give it the new value
2) The file BTrk/ups/BTrk.table will need hand editing.

If you update to a new compiler, or a new version of any of the things on which it depends,
you need to:
1) edit setup.sh
2) edit the lines for other ups products in ups/BTrk.table
      - this can be automated

