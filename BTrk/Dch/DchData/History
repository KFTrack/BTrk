! $Id: History 89 2010-01-14 12:34:14Z stroili $ 
!  
!  DchData Package History (most recent first) 
!  -------------------------------------------

Jan 14, 2010 - stroili
	split code in src and include directories

Aug 12, 2008 - gpdf          Tag V01-06-08
	Wrap an ErrMsg(debugging) call in DchdEdx::applyCorrections() with
	an ErrLogging test.
        Fixed several compiler warnings related to initialization order.
	FIXME: many members in many classes are not explicitly initialized,
        including random subsets that vary from constructor to constructor.
	FIXME: several unused-variable warnings remain, and a warning about
	double-to-int conversion in DchCosmicTime. 
M DchDigiMC.cc DchExpectedHot.cc DchG4Hit.cc DchHOTData.cc DchdEdx.cc History

Feb 16, 2008 - D. Brown      Tag V01-06-07
	[retroactive update by gpdf, 2008.08.12]
	"Change signature of 'transient' method to allow a null pointer for the track trajectory"
	[probably should have been a middle-digit tag increment!]

Sep 20, 2007 - I. Gaponenko  Tag V01-06-06
	CLHEP migration: replaced forward declarations with direct includes
	of the corresponding headers.

Aug 01, 2006 - M. Kelsey   Tag V01-06-05
	AppUserBuild.cc, testDchData.tcl:  Replace L1FctMakeDigis with
	  L1FctDigiMaker per R. Bartoldus

[ Note:  Changes from Feb 2005 to Jun 2006 are not documented :-( ]

Jun 09, 2006 - I. Gaponenko Tag V01-06-04
	Moved the BdbSetTime module to another package, fixed include
	and binary dependency file.

[ Note:  tags do not include Wouter Hulsbergen's changes at the HEAD ]

			   Tag V01-06-01 for 16.0.3 and beyond
Feb 23, 2005 - M. Kelsey   Tag V01-05-03 for 16.0.2x builds
	Add debugging messages to DchdEdx::applyCorrections().

Jul 14, 2004 - M. Kelsey   Tag V01-03-02
	Tag changes for 15-Series nightlies.

Oct 29, 2003 - M. Kelsey   Tag V01-02-00
	(Code developed since 5 September)

	Header changes to DchHitOnTrack and DchMiniHitOnTrack.  Mini-HOTs
	can now create (on demand) actual DchHits from their cached data.
	These hits are _owned_ by the Mini-HOT, replacing their DchDummyHit,
	and are deleted by the Mini-HOT destructor.  Doing this in a
	compatible way required modifications to DchHitOnTrack.hh.

Oct 11, 2002 - M. Kelsey  Tag V01-01-00
	Make some DchDigiWF accessors public.  Changes class footprint, so
	increment second digit of tag.  Must go into cold build.

[ Sep 23, 2002 -- P. Elmer made some changes related to ROOT data. ]

July 2, 2002 - R. Stroili
        remove verbose output from DchdEdx (set it to debug mode)
        
June 27, 2002 - E. Charles 
	Added TrkErrCode to printout if DchHitOnTrack update measurement fails.

June 10, 2002 - E. Charles  Tag V01-00-09
	put a few new data members and accessors in DchExpectedHot, mainly to
	have access to information from GHits that were not associated to any
	Track.  There are related changes in TrkBase and DchReco.
	Only DchExpectedHot.* were changed in this package.

April 30, 2002 - M. Kelsey
	Extract path-length computations in DchdEdx to static function
	::pathLength().  This function may be useful to be called elsewhere.

April 19, 2002 - R. Stroili
	Add missing include in DchHitData.cc

April 4, 2002 - M. Kelsey
	Add pre-calculated constructor to DchdEdx (takes dedx & path input)

April 4, 2002 - A. Ryd
	In DchHitData, replace assert(tdc) with ErrMsg(error).

March 29, 2002 - M. Kelsey
	Add std::vector ctor to DchCosmicTime (needed for DchOep)

March 7, 2002 - R. Stroili
	File code bugs in DchHOTData and DchHOTData_001 files

January 14, 2002 - M. Kelsey -- Tag V00-09-38 for 11.x releases
	Move conversion constants from DchDigi to DchOnline/DchFeatureFlags.hh.
	Replace link_DchData.mk with up to date version.

	This MUST be used with DchOnline V00-08-01

November 9, 2001 - R. Stroili (for releases 11.x)
	Convert error printouts to debugging printouts in class DchdEdx

November 9, 2001 - R. Stroili (for releases 10.4.x)
	Convert error printouts to debugging printouts in class DchdEdx

September 3, 2001 - R. Stroili
	move DchTestMini to KalTests

June 1, 2001 - R. Stroili
	some code cleaning, optimization. 

April 9, 2001 - R. Stroili
	Inline some functions in class DchHitBase

March 29, 2001 - R. Stroili
	fix readout of DchMiniHOT's (override updateMeasurement(...) so that 
	when used in a DchMiniHOT it always calls updateCorrections() event if
	ambiguity flip is forbidden)

December 15, 2000 - Mirna van Hoek
         added class DchMergeDigi to DchDigiMC.hh
         fixed bug in insertTime

December 11, 2000 - R. Stroili
	Optimize HOT (Mini and Reco) code

December 10, 2000 - D. Brown
	Fix memory leak in DchMiniHitOnTrack

November 22, 2000 - D. Brown
	add default constructor to class DchHOTData, needed by Objectivity

November 20, 2000 - R. Stroili
	- move feature extraction status bits enums from DchDigiWF to 
	  DchDigiStatus (new class)
	- add feature extracion bits (all except rawDataAppended) to DchHOTData
	  class
	- add accessor function for status word in DchHitOnTrack
	- remove inlined virtual functions in DchRecoHitOnTrack
	- change packing in DchHOTData
	- split packed data in 4 16 bit words 

November 14, 2000 - R. Stroili
	- fix problems with Solaris compiler in DchHOTData class
	- rearrange packing and status bits in DchHOTData class

November 3, 2000 - R. Stroili
	Add new classes
	  - DchRecoHitOnTrack (HOT's from digi's)
	  - DchMiniHitOnTrack (HOT's from DchHOTData
	  - DchHOTData (mini HOT data)
	  - DchTestMini (miniHOT test module)
	  - DchDummyHit ("service dummy class" needed by DchMiniHitOnTrack)
	The data packing in DchHOTData is still under test

October 10, 2000 - R. Stroili
	Add new class DchHitBase so that the access to the conditions database 
	for DchHit and (future) miniHOT's will be the same

September 22, 2000 - R. Stroili
	remove warning printout (change it to debugging)

September 7, 2000 - R. Stroili
	Fix compilation problems in DchGHit on OSF1V4

July 31, 2000 - W. Lockman
	Added DchG4Hit class. Initially Tagged as V00-09-09-01.

Jul 07, 2000 - M. van Hoek.
        Changed interface of DchGHit, so this can also be used for new DchGHits
        derived from G4Hits. Added constructor for this purpose.
        Changed constructor that makes empty object to one that makes full 
	object.

Jul 11, 2000 - R. Stroili 
	DchdEdx: convert use of pointer to DchCell instead of the object,
	it requires DchGeom V00-05-00 (or later) and DchEnv V00-04-01
	(or later). 

Jun 28, 2000 - R. Stroili
	fix catch statements in tcl scripts

May 30, 2000 - B. Lockman
       	link_DchData.mk: removed LINK_DbiEvent library depedence on DbiEvent
       	dch.ds: warn that this file is no longer used

May 25, 2000 - B. Lockman
       	DchGWireHit.hh: replaced dchGWireHit.h with dchGWireHitDef.h. This
       	removes the dbio common block from DchGWirHit class.
       	DchLayHit.hh: replaced dchGLayHit.h with dchGLayHitDef.h. This
       	removes the dbio common block from DchGLayHit class.
       	DchGHit.hh: replaced dchGGHit.h with dchGGHitDef.h. This
       	removes the dbio common block from DchGHit class.
       
       	*** These changes require DbiEvent V00-15-01 or higher ***

May 22, 2000 - M. Kelsey
       	Jim Panetta reported missing DbiEvent dependency in link_DchData.mk.
       	In fact, both link_*.mk and bin_*.mk are incorrect and need updating.
       	Tag V00-09-04 for 9.1.0, superseding V00-09-03.

May 22, 2000 - J. Panetta
       	Add DbiEvent to link dependencies.  'Tis needed

May 18, 2000 - M. van Hoek
       	DchDigi: make 'Merge' take a const DchDigi& as argument instead of 
	DchDigi*
       	DchDigiMC: 
          add constuctor capable of creating fully functional instances
          make DchSignal a friend

May 17, 2000 - R. Stroili
	remove help member functions from DchDumpData and DchDataHist modules

May 16, 2000 - J. Albert
        Add faster "finding" sigma in DchHit interface.
        Also get rid of unused sigmas that take bunchTime as an argument.

May 05, 2000 - J. Albert
        Make DchHit::setSigScale private and make DchMakeHits a
        friend of DchHit so that the (rather dangerous) setSigScale 
        function is only called from one place: DchMakeHits.

May 3, 2000 - R. Stroili
	Fix compilation problem on Linux

Apr 17, 2000 - R. Stroili
	Remove DchPidInfo.hh from here (end of a long standing migration)

Mar 21, 2000 - R. Stroili
	Add again class DchExpectedHot 

Mar 21, 2000 - R. Stroili
	Temporarily remove class DchExpectedHot from here (V00-08-56)

Mar 08, 2000 - Sumit Sen/Mirna van Hoek
        Changed DchDigi::Merge to find insert location in tdctimes
        array and place it there. Added function DchDigi::insertTime
        to do so.

Mar 03, 2000 - J. Albert (jea-03-03-00)
        Move Eric's DchExpectedHot classes from DchReco to here & fix 
        compilation warning in DchDigiWF.

Mar 03, 2000- R. Bartoldus
        Use addTime() instead of addTimes() in constructors and setTime()
        methods that take a single TDC time as an int or double argument.
        This bug was hidden behind an implicit type conversion from an int
        to a RW vector reference (which has an int constructor).
        [ Modified files: DchCosmicTime.cc ]

Feb 29, 2000 - M. Kelsey
	DchDigi:  Per GPDF, made static TDC/FADC conversion factors "const"
	to allow better optimization.  This changes DchDigi.hh, but in a
	benign way.  A cold build is NOT required to deploy this change,
	though it would have the maximum effect without one.

Jan 31, 2000 - E. Charles
        Add Method to DchHit to return TrkDetElemId.

Feb 07, 2000 - B. Brau
	Modify DchHit to return ambig-signed resolution.

Jan 10, 2000 - J. Roy
        Remove charge saturation correction in DchdEdx since it is now
        handled with all the other corrections

Jan 03, 2000 - R. Stroili
	Minor fix in DchdEdx class

Dec 16, 1999 - R. Stroili
	use new DchGeomBase/DchCellAddr class for address mapping 
	(DchGeomBase V00-00-06 or later)

Dec 9, 1999 - R. Stroili
	fix test application

Nov 23, 1999 - R. Stroili
	Some code cleanup

Nov 20, 1999 - R. Stroili
	Fix compilation warning on Linux (conversion of double to int) in 
	DchDigi

Oct 22, 1999 - J. Albert (jea-10-22-99b)
        Add method for DchHit local access to distToTime function
        (for DchTrkBunchT0 speedup) & fix some erroneous comments

Oct 15, 1999 - R. Stroili
	Put protection against null pointer from the environment in getting 
	de/dx calibrations in DchdEdx class (thanks to Mike)

Oct 5, 1999 - R. Stroili
   Use correction for charge saturation from the global environment

Oct 1  1999 - J. Albert  (V00-08-42)
   Corrected the TDCtoTimeConversion factor (from 1.04/16 to
   1000.0/59.5/256.)

Aug 31 1999 - G. Raven 
-  Make TDCtoTimeConversion and FADCtoChargeConversion statics in
   DchDigi.cc to prepare for correct time conversion correction. 
Aug 26 1999 - G.Sciolla 
-  Call dedxCorrected with extra argument (charge) 

Aug 18 99 - G.Sciolla 
M DchDigiWF.cc/DchDigiWF.hh: add WF clipping fix based on # of clipped samples
M DchHit.cc: remove WF clipping fix based on measured Q 


July 29, 1999 -		R. Stroili
	Fix a bug in DchDigiWF recomputation of charge for clipped waveforms

July 24, 1999 -		R. Stroili
	DchHit constructor checks for bad waveform status and if waveforms
	are available tries to recompute the charge applying some corrections
	DchDigiWF has some methods for recomputing charge for bad waveform
	status (G. Sciolla)

July 21, 1999 -		M. Kelsey
	DchDigi.hh:  Modify bounds checking in RawTdcTime() so that assert()
	  fails when the index is more than the # of TDCs _AND_ there are
	  a non-zero number of TDCs.  The zero-hit case is allowed to pass,
	  and RawTdcTime() returns zero.

	NOTE:  All users of DchDigi::RawTdcTime(), TdcTime(), drifttime()
	must check their digi *FIRST* for a non-zero number of hits before
	accessing these functions.

May 19, 1999 - Lockman
dch.ds: Changed DchGHitMax from 100K to 25K

April 26, 1999 -	R. Stroili
	if helixPath fails use path instead of intersect method

April 25, 1999 -        F. Wilson (FFW-250499)
        - DchdEdx constructor now calls new method helixPath to calculate
          dx. About 5 times faster. If it fails it reverts to old method.
          Requires DchGeom FFW-250499 or later.

April 23, 1999 M. Kelsey
	- In DchDigi:  RawTdcTime() will now assert() on bounds violation.
	               ctors use RWT ...(i) instead of [i], since loop
		       itself does the bounds checking explicitly.

April 14, 1999 M. Kelsey
	- In DchDigi:  Convert internal storage of TDC list to simple array.
	  All ctors, merge() and accessors have been suitably modified.

April 14, 1999 R. Stroili
	- remove definition of unimplemented function 
		double dcaToWire()  const
	  from DchHitOnTrack
	- use new method to compute path length in cell
 
April 7, 1999 F Wilson (FFW-990407)
        Add applyCorrection() method to DchdEdx.cc to apply dE/dx corrections.

April 5, 1999 S. Schaffner
	Change precision on Poca calculations in DchHitOnTrack from 
	3 microns to 10 microns.

March 15, 1999 S. Sen
	Added operator< which is used by DchSim for sorting digis
	by channel, charge and time when merging signal and 
	background digi lists

March 12, 1999 - R. Stroili
	fix test application and tcl script to work without reading 
	simu data

February 26, 1999 - R. Stroili
	- remove tracking from test application
	- add new constructor for class DchdEdx (directly from HOT)
	- modify tcl scripts for test application
	- add testWriteDchData.tcl script to write digi's into the database
	  (still under test)

February 21, 1999 - G. Raven
	fix a bug in DchHitOnTrack ambig() function

February 21, 1999 - R. Stroili
	- modified test application and added tcl scrip to run the same 
	  application both on xdr and on database events. 
	- added some other histograms to DchDataHist module
	- DchDataHist migrated to ErrLogger

February 1, 1999 - G. Raven
        introduce 'entranceAngle', 'wireAmbig', and 'dipAngle' in DchHitOnTrack
        use the above consistently in determination of drift distance of a 
	DchHitOnTrack add 'ambiguity' as an argument in DchHit::drift*
        change 'status' argument in DchCosmicTime constructor to 'unsigned'
        revoke DchDigiTC's friendship of DchCosmicTime
        document the meaning of 'fadcsamples' in DchDigi.hh
        change _dedx into _charge in DchHit
        cleanup DchHit::driftTime, DchHit::crudeTof, DchHit::print
        delete DchHit::angleInCell 
        keep both (driftdistance) ambiguities in DchHitOnTrack
        some generic code cleanup in DchHitOnTrack
        make DchHitOnTrack::updateAmbiguity return 'bool'


January 25, 1999 - S. Schaffner
	Added call to updateMeasurement() in DchHitOnTrack::updateFitStuff() 
	(only the version that calculates derivs).  This is needed to 
	bootstrap the fit when recreating full tracks from the database.

January 12, 1999 - G. Raven
        general cleanup of DchDigi, details are described in DchDigi.hh

December 15, 1998 - M. Kelsey
	DchCosmicTime:  Add new ctor without time argument, whole set of
	protected data-changing accessors, and friendship, to support new
	persistent (DchDataP) classes DchCosTimeObj and DchCosTimeListP.

December 13, 1998 - R. Stroili
	added to DchdEdx operators needed to work with RWTValSortedVector
	class

December 10, 1998 - R. Stroili
	added new class DchdEdx fr Dch Pid reconstruction

December 7, 1998 - G. Raven
	add 'const' to fitTime member function in DchHitOnTrack

November 23, 1998 - R. Stroili
	Fix in GNUmakefile

November 1, 1998 - S. Schaffner
	Add protection to DchHitOnTrack.cc (in three places) against hits 
	that are outside the endplate.  Just turns off the hits -- a 
	better solution is possible.

October 29, 1998 - M. Kelsey -- Tag Version V00-08-08 for 7.5.1 bug-fix

October 28, 1998 - M. Kelsey
        DchCosmicTime now carries list (RWTValOrderedVector) of all TDC
	times from tagged container, instead of just first time.  Modify
	accessors to take index argument (default zero).

October 27, 1998 - S. Schaffner
	Modify DchHitUse so it does not take a time at construction; use t=0 
	right now when creating DchHitOnTracks.  Modify DchHitOnTrack to 
	invoke updateMeasurement at creation.  Modify treatment of 2-d 
	tracks in DchHitOnTrack::updateMeasurement() to recalculate drift.

October 6, 1998 - R. Stroili
	Modified GNUmakefile to work with DchProxy package

September 24, 1998 - S. Schaffner
	Added DchHitUse, derived class of TrkBase/TrkHitUse.  This class 
	replace DchHitOnTrack for adding hits to tracks.  

September 14, 1998 - S. Sen

	DchDigi and DchDigiMC were modified to have RWTValOrderedVectors
	instead of RWTValSortedVectors for storing tdc times, ghits, gtracks
	and drift distances.  This change was necessary because feature
	extraction supplies a list of tdc hits where the first hit is the best
	time in the digi and the remaining tdc hits are ordered according to
	whichever scheme feature extraction chooses.  RWTValOrderedVectors
	will not reorder the hits when they are inserted into the list and
	will thus preserve the original order from feature extraction.  The
	member function drifttime() will return the first (best) tdc hit in
	the list.  The tdc hits can be reordered by friends of DchDigi.  The
	Merge functions were modified so that the list ordering is not
	changed.  The original digi appends the 2nd digi's information without
	reordering.  The drifftime() will be the same as in the original
	unmerged digi.

September 2, 1998 - R. Stroili
	cleaned DchDigi, removed some includes from DchDigi.hh, moved getGTrack
	and getDchGHit function implementation into .cc file

August 27, 1998 - R. Stroili
	removed DchDebGeom module (now in DchGeom)

August 14, 1998 - S. Wagner
	One line sign change in DchHitOnTrack.cc. For non-prototype cosmic
        data, tof MUST have normal sign; otherwise BaBar standard bunch t0
        passed to fitters will have wrong sign. Will tag as V00-08-02 and 
        announce for 7.0.0. 

August 13, 1998 - M. Kelsey
	Re-aligned to new Framework interface (Migration II patchUp script)
	Added new class DchCosmicTime to carry information from special
        scintillation trigger channels in tagged container data.  Filled by
        DchOep/DchDigiTC::makeCosTime.

August 5, 1998 - R. Stroili
	aligned to new Framework interface

August 5, 1998 - S. Sen
	fixed merge function in DchDigi (for ProtoII data only)

August 3, 1998 - R. Stroili
	modified DchHitOnTrack, now the wire trajecory type is the base class
	Trajectory, the class now has a pointer to the wire trajectory instead 
	of owning the wire trajectory itself. In DchHit moved outside the 
	header file the include of DchLayer

July 22, 1998 - S. Patton
	Made DchHitMap inheritance from AbsEvtObj public.

July 21, 1998 - S. Schaffner
	Made DchHitMap inherit from AbsEvtObj.

July 20, 1998 - R. Stroili
	some minor changes (mostly code cleanup), introduced new member 
	function in DchHitOnTrack.hh to access layernumber from the hit 
	directly

June 29, 1998 - S. Wagner
	Added Gabriella's code to DchHitOnTrack.cc to do proper time correction 
        for real chamber data taken with trigger scintilator (as opposed to 
        ProtoII). To get this, set:
           isCosmic   set true
           zPM        set 999 
        in module talk DchBuildEnv. Will tag as V00-07-31.

June 9, 1998 - S. Schaffner
	Cleaned up bugs in removing Hots from tracks in DchHit dtor.

May 26, 1998 - S. Schaffner
	Modified DchHit dtor: no longer delete associated Hots -- that's 
	the track's job. 

May 19, 1998 - R. Stroili
	changed charge converion in DchDigi.hh from .1 to 1. Added new 
	constructor for TC

May 18, 1998 - R. Stroili
	changed time & charge datamembers of DchDigi int instead of double
	and added conversion & accessor functions

April 22, 1998 - S. Sen
	made Merge and MergeMC functions public in DchDigi and DchDigiMC, 
	needed by DchProto code

April 10, 1998 - R. Stroili
	Converted time and drif HepAlist's into RW sorted vectors
	Added data members to (previously) dummy class |DchDigiWF|

April 8, 1998 - S. Schaffner
	Major changes to DchHit: removed all mcDrift stuff, and added 
	bunch-time capability to all time-based functions (drift time, 
	distance, sigma).  Removed some functions and tried to clean up 
	the interface.  Also removed default args from one sigma() function 
	and one driftDist() fcn, to reduce confusion.
	Made changes to DchHitOnTrack interface to provide times for the
	revised DchHit interface.

	Revised code gives very similar answers in DchReco to old code 
	(identical, I think, except for the tof calculation formerly done 
	in DchHitOnTrack::updateMeasurement, now done in TrkRecoTrk with a 
	slightly different mass).

April 4, 1998 - S. Schaffner
	Update to new location of TrkViewInfo enum in TrkBase.

April 2, 1998 - S. Schaffner
	Modify DchHitOnTrack::updateMeasurement() to get tof from 
	TrkRecoTrk::arrivalTime() (only for non-cosmic tracks).

March 31, 1998 - R. Stroili
	Removed old |DchTrkSeg| class

March 25, 1998 - M. Kelsey
	Remove obsolete ctor's from DchDigi.  Add operator== and !=, and
	move static A-to-D scaling functions from DchOep to here, since
	they are used to evaluate equality/inequality of Digi values.
	Replace usage of member functions in DchDigi functions to direct
	access of data members (reduces overhead considerably).
	
March 23, 1998 - R. Stroili
	moved histograms to Hbk* package

March 19, 1998 - R. Stroili
	Removed any reference to MakePointers

March 17, 1998 - R. Stroili
	Added a new constructor for TC, give friendship to DchDigiTC

March 17, 1998 - S. Sen
	removed |DchDigi| and |dchDigiMC| constructors taking |DchSignal| as input.  
	DchMakeDigi3 now fills these classes (dependency inverted).  This should remove circular 
	link dependencies.

March 13, 1998	- R. Stroili
	added 2 new datamembers (_tdchits and _fadcsamples) to |DchDigi| class

March 11, 1998	- R. Stroili
	Added "dummy" (for the moment) class for the Dch waveform 
	(|DchDigiWF|)

March 4, 1998- A. Mokhtarani
	DchDigi: Made DchDigiObj and DchDigiListP friend and changed
	access to set function from private to friend
        DchDigiMC: added default constructor; made DchDigiMCObj friend;
	added new set functions for persistence objects

February 17, 1998 - S. Sen
	moved DchDigiMC from DchSim to DchData

February 17, 1998 - S. Schaffner
	Add DchHitMap.

February 6, 1998 - M. Kelsey
	Minor patches to DchDigi ctors, to allow compile/link on AIX

February 5, 1998 - S. Sen
	Changed DchDigi design: separated MC info into DchSim/DchDigiMC
		removed DchWireLayer
	Made changes to DchDataHist and DchHit to use the new digi format
	This does _NOT_ work yet. 

February 3, 1998 - R. Stroili
	Add default constructor to DchDigi for persistent digi's

January 26, 1998 - R. Stroili
	Add a header to DchHitOnTrack.cc.

January 20, 1998 - R. Stroili
	Restored old dch.ds, changes to GNUmakefile to work with incremental 
	link
	
December 22, 1997 - S. Sen
	DchHit.cc: removed #include "DchData/DchGLayHit.hh"
		corrected z origin bug for propagation time correction
	DchWireLayer.cc: removed DoDetSmearing (used layer hits), 
		added comments
	DchDigi.cc,.hh: changed names of provate functions rang and flat to 
		ranGauss and ranFlat
		fixed z origin bug in corrTime
		removed all DchGLayHit and DchTrkSeg code
		removed _layhit private member data
	dch.ds: removed DchGLayHit information

December 12, 1997 - R. Stroili
	Removed f2c.h, |glando|, |grandom| and |DchWire|, as they were only 
	needed by the digitization of the old DchGLayHit's

November 21, 1997 - R. Stroili
	Remove last residuals of |DchInitGeom| usage....

November 12, 1997 - S. Schaffner
	Recalculate flight length as first step in 
	DchHitOnTrack::updateMeasurement().

November 8, 1997 - R. Stroili
	moved |DchDriftCalib| and |DchReadCalConst| to the DchCalib package
	to remove circular dependencies at link-time

November 7, 1997 - R. Stroili
	moved geometry to DchGeom package, made all changes needed to make it 
	run (removed classes |DchGeom|, |DchLayer| and |DchSuperLayer|). 
	Removed also support of old GEANT hits from DchDigi, from now on 
	the reconstruction code will work only with DchGHit's.

October 22, 1997 - S. Schaffner
	Make DchHitOnTrack::updateFitStuff() return TrkErrCode 

October 6, 1997 - R. Stroili
	added print functions to |DchGHit| class

September 23, 1997 - R. Stroili 
	Removed all Objectivity code (moved in DchDataP, S. Gowdy)

September 22, 1997 - R. Stroili 
	wireBetaInv value moved from source code (DchDigi.cc, DchHit.cc, 
	DchHitOnTrack.cc, DchWire.cc) to the DchEnv package

September 15, 1997 - G.Sciolla 
  -  Propagation velocity of the signal in the tungsten wire 
     set to c/1.02 instead of c/1.2    

  -  DchHit.cc .hh 
     A lot of changes in order to use the multiple TDC hits intruduce in the 
     Digis by S.Wagner. 

  -  The time is no longer cached in _time but extracted from the Digi. You 
     need to specify which one you want to use: 

          double DchHit::rawTime(int i) const {
            //  return _time;                   // old version 
            return digiPtr->TdcTime(i);         // new version 
          }

     The default is 0 (first hit on the wire).   
     We have to get rid of the member _time. 
     Same thing for _crudeDrift and _crudeSigma + functions that return them. 
  
  -  All these modifications might slow down the program a little bit 
     because we are not caching anymore times, sigmas and drift distances but 
     may save bugs in the future. 

  -  DchHitOnTrack.hh and .cc 

   - New data member to store what hit has to be used in the fit. 
     Default 0 (1st hit) 
        int _timeIndex;                  // defalut TDC hit (0-15)

   - New functions to set timeIndex and read it  
       void setTimeIndex(int i)                       {_timeIndex=0;}     
       int  timeIndex()                               {return _timeIndex; }


   - When the Hot accesses the DchHit it calls the funtions to get the time, 
     sigmas, drift... using the correct timeIndex. 

   - the function 

          DchHit::setValues(const DchLayer *l, int wire, double time, 
             double mcdist, int tkno, double dedx) {
     became  

          DchHit::setValues(const DchLayer *l, int wire, 
		       double mcdist, int tkno, double dedx) {


   - Better calculation of TOF for cosmics (useful for protoII analysis)  	



September 3, 1997 - S. Wagner
	added _tdctimes and 2 accessor fcns to DchDigi 

August 27, 1997 - R. Stroili
	changed link files, fixed a bug: missing package name in include
	directive of DchReadCalConst

August 13, 1997 - S. Wagner
	step-wise resolution fcn in DchDriftCalib.cc found to impede 
        fit convergence; change resol() to use piece-wise linear
        resolution fcn 

August 11, 1997 - R. Stroili
	fixed a bug in DchHit introduced in August 5 changes
	updated link_DchData.mk for new PdtInit location
	cleaned some unused variables

August 7, 1997 - R. Stroili
	fixed a bug in |Layer| function

August 6, 1997 - R. Stroili
	Introduced a mamber function (|Layer|) to allow the selection of the
	calibration model at startup from module |DchInitGeom|.
	Moved |DchPidInfo| from package DchData to package DchPid, at the 
	moment DchPidInfo.hh in DchData has an include of 
	DchPid/DchPidInfo.hh. Completed migration to new AbsEvent in 
	|DchDataHist| and made a correction to DchHitOnTrack.
	Added dummy member functions to DchDebGeom to eliminate compilation
	warnings

August 5, 1997 - G. Sciolla
	Introduced corrections for propagation time and time of flight for 
	cosmics, files affected: 
            DchDriftCalib.cc DchHit.cc DchHit.hh DchHitOnTrack.cc 
            DchHitOnTrack.hh DchReadCalConst.cc 
 
August 1, 1997 - R. Stroili
	Updated code to new AbsEvent

July 25, 1997 - R. Stroili
	Updated code to new CLHEP directory structure.
	Made hitTraj() in DchHitOnTrack public for GraDisplay

July 17, 1997 - S. Schaffner
	Move superlayer information from DchReco/DchSLchamber to DchGeom; 
	move DchSuperLayer from DchReco to DchData.

June 28, 1997 - D. Quarrie
	Simplify the interface of DchGHitP. These changes are guarded
        by OBJYBASE and should be invisible to non-database builds.

June 26, 1997 - R. Stroili

	Add a simple module to help debug geometry problems (if any)
	Migrate to new AbsEvent method in DchDataHist module

June 22, 1997 - D. Quarrie

	Add Objectivity-specific code to couple DchGHit & DchGHitP
	together and ensure a one-to-one mapping between them.
        The code is protected by OBJYBASE and should have no effect on
        non-Objectivity code.

June 12, 1997 - S. Schaffner

	updates to keep with changes in tracking classes, Introduced dE/dx in
	HOT's

June 9, 1997 - D. Quarrie

	changes related to Objectivity stuff

June 4, 1997 - G. Sciolla

	introduced layer by layer calibration

May 29, 1997 - D. Quarrie

	Introduced support for Objectivity (store of DchGHit)

May 26, 1997 - R. Stroili

	modified link_DchData.mk to remove linking problem on AIX

May 26, 1997 - S. Schaffner
        removed newFltLen() from DchHitOnTrack (no longer used), and removed 
        fltToArc() and arcToFlt from DchHitOnTrack.

May 16, 1997 - R. Stroili

    	inizialized a pointer in DchDriftCalib, added some protection on the 
	tracks

May 7, 1997 - R. Stroili

	fixed problem in DchDriftCalib

May 6, 1997 - R. Stroili

	use stereo angle calculated from twist angle instead of the one in
	the data file

May 5, 1997 - G. Sciolla

	introduced layer-by-layer calibration (for Proto-II)

April 24, 1997 - R. Stroili

	Removed correction on smearing, corrected Dch z offset in new geometry
	files

April 23, 1997 - R. Stroili

	Default geometry is the new one

April 23, 1997 - R. Stroili

	Fixed a bug in the geometry (_qOffset of wires), reduced smearing of
	DchGHit's, added old geometry file (default is old geometry file)
March 21, 1997 - S. Schaffner
   
	Added some "consts" to DchHitOnTrack.

March 19, 1997 - R. Stroili

	changed GNUmakefile to new scheme
	changed |#include| statements, added package directory where missing

March 13, 1997 - Maurice Foucher

	Added some more ASCII output to DchDataHist.cc in preparation
	for testing. Added a histogram and and some ntuple variables.

March 11, 1997 - Maurice Foucher

	Changed order of calls in DchDigi::Merge. The order was all
	screwed up. 

March 6, 1997 - Maurice Foucher

	Changed #include RecoUtils to #include RecoData.
	Reduced gaussian smearing on _dedx in DchDigi from 1.0 KeV to
	0.01 KeV and added protection so it is not < 0.

March 5, 1997 - Maurice Foucher

	Added AppUserBuild.cc and DchDataHist.hh and DchDataHist.cc
	to produce some quality control histograms and ntuples. Modified
	GNUmakefile to produce an executable testDchData to make the
	histograms. Added a tcl script testDchData.tcl to run the new
	executable. This program is not complete but compiles and runs. 
	I want to commit it in steps.

March 1, 1997 - Maurice Foucher 

	Reorderd this file so that most recent is first. 
	Changed DchTrkSeg.cc to use PDT instead of GPid and GPartList

Mon Mar 11 08:42:10 PST 1996

- adding digi production code, includes many (too many?) classes

	DchGLayHitToDigi - module to produces digis from |DchGLayHit|s
	DchWireLayer     - flat array of digis in a layer
	DchWire		 - a wire
	DchLayer         - a layer of wires
        DchGeom          - drift chamber geometry (contains layers)
	DchTrkSeg        - a track segment derived from a |GLayHit|
	glando           - routine stolen from |geant| to to landau fluctuations
        grndm            - c/c++ version of |geant| random number routine
                           needby |glando|.
        f2c.h            - include file for |f2c|ed routines in |glando|
	DchDigi          - basic digi via |dbio| + constructors for 
			   producing digis from track segments, etc.

December 10, 1995 - Patricia Rankin and Frederic Kral

 - This History file added on December 10, 1995.

 - DCLAY and DCWIR hit structures changed:  see also gndcha/History.

 - dbio output format changes:
	DbiEvent/
	 DchHitsToDs.F	Removed:  Moved to DchData/
	DchData/
	 DchHitsToDs.F	Added:  Updated DCLAY and DCWIR hit structures.
	DchData/dch.ds	Updated DCLAY and DCWIR hit structures.
			Maximum hits changed from 100 to 5000.
			Do not store redundant DCWIR x,y,z.

